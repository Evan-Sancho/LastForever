<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=>, initial-scale=1.0">
    <title>Last Forever</title>
</head>
<body>
</body>
<script>
    !(function(window){
    const host="https://aibeings-vip.xiaoice.com",url=host+"/CRTCPreview/c919078c-ad59-11ef-b08d-d16f32474776?sign=ZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKd1lYbHNiMkZrSWpvaWUxd2lZMjl0Y0dGdWVVbGtYQ0k2WENJellqZGlObUZpT1RsbE9XTTBOVFl4T0daa016RTFaVEkzTkRReFptRTJPVndpTEZ3aWFXUmxiblJwWm1sallYUnBiMjVKWkZ3aU9sd2lNak5qTmpnNVpUTXRORE15WXkweE1XVmxMVGcwTXpFdE5tUXpNR0V3TWpVMU56RXdMV2x1ZEdWeVlXTjBhWFpsTFdKaFkydGxibVJjSWl4Y0luUnZhMlZ1U1dSY0lqcGNJbUZqWWprNU1tTTRNalV5WVRReU1ESmlZalptWVRZeU5HTXhaalZtTldaalhDSjlJaXdpYVdGMElqb3hOek15TmprME9UUXlMQ0psZUhBaU9qSTFPVFkyT1RRNU5ESjkuQlpZd2k2RnZSMTRPekduNDRMZkdyUGV5aGlSNW43SFhCQ203bXZYdzlRSQ==&isIFrame=1";
    const wrapDiv=document.createElement("div");
    wrapDiv.id="xiaoice-streaming-embed";
    const container=document.createElement("div");
    container.id="xiaoice-streaming-container";
    const stylesheet=document.createElement("style");
    const clientWidth=document.body.clientWidth;
    stylesheet.innerHTML=" #xiaoice-streaming-embed { z-index: 9999; position: fixed; inset: 0px; margin: auto; width: 200px; height: 200px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0px 8px 24px 0px rgba(0, 0, 0, 0.12); overflow: hidden; } #xiaoice-streaming-embed.horizontal { height: 366px;  width: calc(366px * 16 / 9); border: 0; border-radius: 12px; box-shadow: 0px 20px 20px 0px rgba(0, 0, 0, 0.10); } #xiaoice-streaming-embed.vertical { height: 680px;  width: calc(680px * 9 / 16); border: 0; border-radius: 12px; box-shadow: 0px 20px 20px 0px rgba(0, 0, 0, 0.10); } #xiaoice-streaming-container { width: 100%; height: 100%; } #xiaoice-streaming-container iframe { width: 100%; height: 100%; border: 0; }";
    const iframe=document.createElement("iframe");
    (iframe.allowFullscreen=!1);
    (iframe.title="Streaming Embed");
    (iframe.role="dialog");
    (iframe.allow="microphone");
    (iframe.src=url);
    window.addEventListener("message",(e)=>{console.log('e.data.action',e.data.action,e.origin);
    if(e.origin!==host)return;    
    if(e.data.action==='start'){if(e.data.ratio==='horizontal'){wrapDiv.classList.toggle("horizontal",true)}else if(e.data.ratio==='vertical'){wrapDiv.classList.toggle("vertical",true)}}else if(e.data.action==='close'){
        wrapDiv.classList.toggle("horizontal",false);
        wrapDiv.classList.toggle("vertical",false)}});
    container.appendChild(iframe);
    wrapDiv.appendChild(stylesheet);
    wrapDiv.appendChild(container);
    document.body.appendChild(wrapDiv)
    })(globalThis);
    //使用 Web Audio API 主動檢測和切換音頻輸出設備
    navigator.mediaDevices.enumerateDevices().then((devices) => {
    const audioOutputDevices = devices.filter(device => device.kind === "audiooutput");
    console.log("Audio Output Devices:", audioOutputDevices);
    if (audioOutputDevices.length > 0) {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    audioContext.setSinkId(audioOutputDevices[0].deviceId).then(() => {
    console.log("Audio output switched to:", audioOutputDevices[0].label);
    }).catch(error => console.error("Error setting audio output:", error));
    }
    });
</script>
</html>
